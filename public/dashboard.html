<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Akorn - Dashboard</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Dashboard Navigation -->
        <div class="dashboard-nav">
            <div class="dashboard-nav-tabs">
                <button class="nav-logo" onclick="window.location.href='/profile'">
                    <i class="fas fa-seedling"></i>
                </button>
                <button class="dashboard-nav-tab active" data-tab="courses">
                    <i class="fas fa-book"></i> courses
                </button>
                <button class="dashboard-nav-tab" data-tab="assignments">
                    <i class="fas fa-tasks"></i> assignments
                </button>
                <button class="dashboard-nav-tab" data-tab="calendar">
                    <i class="fas fa-calendar-alt"></i> Calendar
                </button>
                <button class="dashboard-nav-tab" onclick="window.location.href='/syllabus'">
                    <i class="fas fa-file-alt"></i> Syllabus
                </button>
                <button class="dashboard-nav-tab" onclick="window.location.href='/applications'">
                    <i class="fas fa-rocket"></i> Applications
                </button>
                <button class="dashboard-nav-tab" onclick="window.location.href='/mascot'" id="mascot-nav-btn">
                    <i class="fas fa-magic"></i> Schools Mascot AI
                </button>
            </div>
            <div class="user-info">
                <span id="user-name">Loading...</span>
                <button id="logout-btn" class="btn btn-secondary">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
        </div>

        <!-- Loading Screen -->
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <p>Loading your Canvas data...</p>
        </div>

        <!-- Main Content -->
        <main id="main-content" class="main-content" style="display: none;">
            <!-- Dashboard Content Area -->
            <div class="dashboard-content-area">
                <!-- Tab Content -->
                <div class="tab-content">
                    <!-- Courses Tab -->
                    <div id="courses-tab" class="tab-pane active">
                        <section id="courses-section" class="card">
                            <div class="card-header">
                                <h2><i class="fas fa-book"></i> My Courses</h2>
                                <div class="card-actions">
                                    <button id="refresh-courses" class="btn btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                            </div>
                            <div class="card-content">
                                <div id="courses-grid" class="courses-grid">
                                    <!-- Courses will be populated here -->
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Assignments Tab -->
                    <div id="assignments-tab" class="tab-pane">
                        <section id="assignments-section" class="card">
                            <div class="card-header">
                                <h2><i class="fas fa-tasks"></i> Assignments</h2>
                                <div class="card-actions">
                                    <select id="course-filter" class="select">
                                        <option value="">All Courses</option>
                                    </select>
                                    <button id="refresh-assignments" class="btn btn-secondary">
                                        <i class="fas fa-sync-alt"></i> Refresh
                                    </button>
                                </div>
                            </div>
                            <div class="card-content">
                                <!-- Filters Section -->
                                <div class="filters-section">
                                    <h3><i class="fas fa-filter"></i> Sort & Filter</h3>
                                    <div class="filter-options">
                                        <div class="filter-group">
                                            <label for="sort-filter">Sort by:</label>
                                            <select id="sort-filter" class="select">
                                                <option value="ai-recommended">AI Recommended</option>
                                                <option value="newest-first">Newest to Oldest</option>
                                                <option value="oldest-first">Oldest to Newest</option>
                                                <option value="due-date">Due Date</option>
                                                <option value="priority">Priority</option>
                                                <option value="course">Course</option>
                                            </select>
                                        </div>
                                        <div class="filter-group">
                                            <label for="status-filter">Status:</label>
                                            <select id="status-filter" class="select">
                                                <option value="">All Status</option>
                                                <option value="not_started">Not Started</option>
                                                <option value="in_progress">In Progress</option>
                                                <option value="completed">Completed</option>
                                                <option value="missing">Missing</option>
                                            </select>
                                        </div>
                                        <div class="filter-group">
                                            <label for="priority-filter">Priority:</label>
                                            <select id="priority-filter" class="select">
                                                <option value="">All Priorities</option>
                                                <option value="critical">Critical</option>
                                                <option value="urgent">Urgent</option>
                                                <option value="high">High</option>
                                                <option value="medium">Medium</option>
                                                <option value="low">Low</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                
                                <div id="assignments-list" class="assignments-list">
                                    <!-- Assignments will be populated here -->
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Calendar Tab -->
                    <div id="calendar-tab" class="tab-pane">
                        <section id="calendar-section" class="card">
                            <div class="card-header">
                                <h2><i class="fas fa-calendar-alt"></i> Akorn Calendar</h2>
                            </div>
                            <div class="card-content">
                                <!-- Simple Google Calendar Sync Section -->
                                <div class="google-sync-section" style="margin-bottom: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                                    <h4><i class="fas fa-calendar-plus"></i> Add All Assignments to Google Calendar</h4>
                                    <p>Click the button below to add all your Canvas assignments to your Google Calendar:</p>
                                    <button id="add-all-assignments" class="btn btn-success">
                                        <i class="fas fa-plus"></i> Add All Assignments to Google Calendar
                                    </button>
                                    <div id="sync-status" style="margin-top: 10px; display: none;"></div>
                                </div>
                                
                                <!-- Connection and Status Area -->
                                <div class="calendar-connection-area">
                                    <div class="calendar-buttons">
                                        <button id="connect-google-calendar" class="btn btn-primary">
                                            <i class="fab fa-google"></i> Connect Google Calendar
                                        </button>
                                        <button id="sync-assignments" class="btn btn-secondary">
                                            <i class="fas fa-sync-alt"></i> Sync Assignments
                                        </button>
                                        <button id="test-copy-url" class="btn btn-info">
                                            <i class="fas fa-copy"></i> Test Copy URL
                                        </button>
                                    </div>
                                    <div id="google-calendar-status" class="google-calendar-connected" style="display: none;">
                                        <i class="fas fa-check-circle"></i>
                                        <span>Google Calendar Connected</span>
                                    </div>
                                </div>
                                
                                               <!-- Google Calendar Embed -->
               <div id="google-calendar-embed" class="google-calendar-embed" style="display: block;">
                   <div class="calendar-header">
                       <h3><i class="fas fa-calendar-alt"></i> Your Google Calendar</h3>
                       <div class="calendar-actions">
                    <button id="copy-calendar-link" class="btn btn-secondary" style="display: inline-block;">
                        <i class="fas fa-copy"></i> Copy Calendar URL
                    </button>
                    <a id="open-google-calendar" href="#" target="_blank" class="btn btn-secondary">
                        <i class="fas fa-external-link-alt"></i> Open in Google Calendar
                    </a>
                </div>
                   </div>
                   <div class="calendar-iframe-container">
                       <iframe id="calendar-iframe" 
                               src="" 
                               style="border: 0" 
                               width="100%" 
                               height="600" 
                               frameborder="0" 
                               scrolling="no">
                       </iframe>
                   </div>
               </div>
               
               <!-- Fallback Calendar View (when Google Calendar not connected) -->
               <div id="fallback-calendar-view" class="calendar-view">
                   <div class="calendar-header">
                       <button id="prev-month" class="btn btn-secondary">
                           <i class="fas fa-chevron-left"></i>
                       </button>
                       <h3 id="current-month">July 2025</h3>
                       <button id="next-month" class="btn btn-secondary">
                           <i class="fas fa-chevron-right"></i>
                       </button>
                   </div>
                   <div id="calendar-grid" class="calendar-grid">
                       <!-- Calendar will be populated here -->
                   </div>
               </div>
                                
                                <!-- Upcoming Assignments Section -->
                                <div class="upcoming-assignments">
                                    <h3>Upcoming Assignments</h3>
                                    <div id="upcoming-assignments-list" class="upcoming-assignments-list">
                                        <!-- Upcoming assignments will be populated here -->
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>

                    <!-- Syllabus Upload Tab -->
                    <div id="syllabus-tab" class="tab-pane">
                        <section id="syllabus-section" class="card">
                            <div class="card-header">
                                <h2><i class="fas fa-file-alt"></i> Syllabus Upload</h2>
                            </div>
                            <div class="card-content">
                                <div class="syllabus-upload-area">
                                    <div class="upload-instructions">
                                        <h3><i class="fas fa-lightbulb"></i> Akorn Syllabus Analysis</h3>
                                        <p>Upload your course syllabus and let AI extract assignments automatically:</p>
                                        <ul>
                                            <li><i class="fas fa-check"></i> Extract assignment names and due dates</li>
                                            <li><i class="fas fa-check"></i> Identify point values and requirements</li>
                                            <li><i class="fas fa-check"></i> Add to your assignment tracker</li>
                                        </ul>
                                    </div>
                                    <div class="upload-zone" id="upload-zone">
                                        <div class="upload-icon">
                                            <i class="fas fa-file-upload"></i>
                                        </div>
                                        <p>Drag and drop your syllabus file here<br>or click to browse</p>
                                        <input type="file" id="syllabus-file" accept=".pdf,.doc,.docx,.txt" style="display: none;">
                                    </div>
                                    <div class="upload-progress" id="upload-progress" style="display: none;">
                                        <div class="progress-bar">
                                            <div class="progress-fill"></div>
                                        </div>
                                        <p>Processing syllabus with AI...</p>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="dashboard.js"></script>
</body>
</html> 